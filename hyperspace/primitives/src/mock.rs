// Copyright 2022 ComposableFi
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

use ibc::core::{
	ics02_client::context::ClientTypes, ics04_channel::msgs::PacketMsg,
	ics26_routing::msgs::Ics26Envelope,
};
use ibc_proto::google::protobuf::Any;
use pallet_ibc::light_clients::{AnyClient, AnyClientMessage, AnyClientState, AnyConsensusState};

#[derive(Clone, Copy, Debug, Default, Eq, PartialEq)]
pub struct LocalClientTypes;

impl ClientTypes for LocalClientTypes {
	type AnyClientMessage = AnyClientMessage;
	type AnyClientState = AnyClientState;
	type AnyConsensusState = AnyConsensusState;
	type ClientDef = AnyClient;
}

#[test]
fn tst() {
	/*
		"type_url":"/ibc.core.channel.v1.MsgAcknowledgement"
	"value":"0x0aa60208f60212087472616e736665721a0a6368616e6e656c2d313522087472616e736665722a0a6368616e6e656c2d313532e1017b2264656e6f6d223a227472616e736665722f6368616e6e656c2d31352f36222c22616d6f756e74223a22333030303030303030303030222c2273656e646572223a22307833343032393534346230323639333532663230323132363939626632316435383936646233396464376161326665623061356165333664613266386338643238222c227265636569766572223a22307833343032393534346230323639333532663230323132363939626632316435383936646233396464376161326665623061356165333664613266386338643238222c226d656d6f223a22227d3a0708e30f10f885774080d0fea0c7d892ae1712117b22726573756c74223a2241513d3d227d1a97113c8c40848008f7557ed51826fe18d84512bf24ec75001edbaf2123a477df72a0a9f3640a7ce870696c645f73746f726167653a64656661756c743a6962632f80f8a19e1c97ec5c07f022fcdc2e12e4b35df9b4a47bb9be262e70f89bce04caff150180008180a7ad9b9099c130e84fe627ba1266380121482554aeb24d6143ad6e24cba59f82808759ff7fa9ef1542acf69057689b6871e6d55385ba22e8ca7f78fc29c487b7291d028000b48067a673d06fe04d99f7617c122b5fd23a1b9c6a6cdeb82ec2e352e4312ad5fafe808424176abb28c79d72d0e49ee9fb089176fa677423758308ed582390440627d780ed28d116d27e8d6920af1c4b8ab1deff88a76fb4dba806ef383cb3060ee6f85880c16e9c4037f1832f4920035d1306e1adfcea2e913760efb32a432feba30c2fd89901800a4080b3f0ad3760f498c5c244e4aafe573231b1ec59347945b482eca92e6514b56a62809b7d6b20669e95dd38a35f5043fd90cfbf83865889b07572a4052f00a849a17380e2546a3b3d9b022772277d0d2e6118241513a437ded97e5f8db2b566f9e0338c1d028017008070d056841d8b5a8ed6fde4c9168c753cdbd75911e86e786776a444631802a6798070d056841d8b5a8ed6fde4c9168c753cdbd75911e86e786776a444631802a6798070d056841d8b5a8ed6fde4c9168c753cdbd75911e86e786776a444631802a6798070d056841d8b5a8ed6fde4c9168c753cdbd75911e86e786776a444631802a679350580ff0380f8e73fe94373275a368548c5951487a001a61fc9706b33fa7e8de89de073278d80946df0e8ab0a495be6d789b4b9ec21a36fedaecef934e411e6fe7732244e2aca808510c537f8a244ae9908d240a90edb09ae5098fcb2dda802c21b48c9c8fd8def80c56d3cc52bcd97e9ed028e8681b7fac98207a2f4f689864635b9ecb827137a6180ff0d9d608cf27abdb870c0b8380516b2c0a64d148452a4e69d2b50d24515e6cc808680cee72b03563342f51c797483a35494857211e0208a0020f7091dd17ddfb58097733749486423fb9b5f18a76357ca1642bc4f17fdb15a2eceb0ca8aa823e5f680fa2143c974a90a1d11d5fcf5a90b4e1323cb9807a311c0931fa4cdf954ab92768070d056841d8b5a8ed6fde4c9168c753cdbd75911e86e786776a444631802a6798070d056841d8b5a8ed6fde4c9168c753cdbd75911e86e786776a444631802a6794d0880ffff804a455a876830b2dcd746ca8bbce98fe4a320443ebecebcf4e3c5927df815c47480a611986a2cac15a1914a85c63e13ef4c26a0f532e74c66d088887608e9592dd3805ca4cdf94e8111a4c42623adc10c4cfd58bd1248030a9cfdd6d93c37f59e5a70805a0a36583dcf566817b6d0c929e214178a3b790822d0f5128e062fc887b38ca580c0c60811ad0a5aa4c41768e629ebf5e1f315f3cba2cee04333044d3f6ec31e1f80ad1101ddf2c4a678d764ab03c3d2a5727769c7f4bd4b14ae6f3281713393ddf08022c4e85225eca2f11449808d55279e24d2552858006f120576d0557dc536fd948053cdeff33558ded2c6df8afc6a5a7ddfcd783dd8b14741ddf4c2bfc07a0d4e8d8000a7cb99070ccf5741b88a449e0f5f193802239b85f624d2b71c8af29b3658078071ec1d58ad85a907eea332e3a4705ec6b01560fadc1816a49fec30aba4c8bc4580247520a7c0e18ea08e6a3bebb665046bdafb8acad3b698d60f07eed0513a87fc80ad5c51835b9c238f0a66245f3496c3b4c68fac931fcf93b2ea00dbf5c60c314980fc39c3474371570bfae38b0ef2a23de6d2aa7ac5dfb5ba2314e35ee67c1cf0bd80fcba0cf11d543cd607849ab7d7009ed1bbc4986ac67a64a29824800b8452daf5803e7e88c669c92e864cebaa50c09b9c05c02a7d8a6613881d0f81afe7b774910b80b2c9be4c8d75326ab30c6877b4016a54bc833b446b10b18e9d0ed92700bb7f87190181032200802a27e7669b66fcf0ebfa80e49173f83b8aad040d5d89cb0cb9536c9bcf583e3c8081457aa446fe0c54b4a78bf53d0808b0fda8ff992a0c866a1a7319c52a1669422501886962632fc00080ff51f84f10265669af03d50bfe161075328dd96066106e0f03df51a211f4857a809a646f4e8212069bc8225d9f378e6c9c7a7fb15badd7f8d86e38aa9ba1c76013e1049702f73657175656e6365732f3fe0380d62ad86c27847b759c99c674114bff55f289df3b57a1aff7f0be614a3882e20e80d59446a4f690aeb79ee870dcdc25bd012a300d3b8fd7f8dff60c2376a41552a580315e0a73b3afef6bd4507da56038575e4debe5c77372186b31b21a9b87b0dcdb80cedec82981ac3fb0eec8c84298cbf4c7ea255d09c4b9c53de2697f0d8cbdfcb68003909b250cc0be97f7e280a27997f29c7fec73f82cf33e36732aded3159d50d4800e2a804839d9fc4b58376e811ea1ba5df4ac721250ea150b4a614e52868551c4808cf67d29afbdd4015313c28bae4edefdad43b0aa851116bac4c797497d3d0255803a67bfc607629b5fdcd8e85d9016a6934c6a2839c3e5b9abd433f10f55202db8808d60f005b0b01f60212ed23f77abc62021aa34cd21a284381177f9f8b71a06773102bf0a0636b732f706f7274732f7472616e736665722f6368616e6e656c732f6368616e6e656c2d3a20080fbd39aa9501456ddf8d875a106bc7a8a8f23a79218be9703b0eeccdc21f842a1803dac5c3069aeac44a20592d20ffac9a2b2d327f353a8e0d23e5422b2cd1f800d80dfd19245920e15d01a445f91733f9c1256f4f4b712370b8d12095f6f19ecfb411901c00800848008f7557ed51826fe18d84512bf24ec75001edbaf2123a477df72a0a9f3640a7c803bc31ba642793dfce756b45bd000120141feb2ab98aef6b3f87d2c36f045729e1901c00800848008f7557ed51826fe18d84512bf24ec75001edbaf2123a477df72a0a9f3640a7c807f51d88df10ae016594fa301b5f62cb9e48b07c9ac4c7d5bb276459d41f9743598c263400000805d61aa2ef5e96df35fd026e1c78efd7f38f6aa37ce7ea8111edfac73bd84779b220708e30f10f9fc762a30357763676d3362626f74484263536a70674e3675475633333858687844477542323242455478736267614d7771687a54"
		 */
	let any = Any {
		type_url: "/ibc.core.channel.v1.MsgTimeout".to_string(),
		value: hex::decode("0aa50208f50212087472616e736665721a0a6368616e6e656c2d313522087472616e736665722a0a6368616e6e656c2d313532e0017b2264656e6f6d223a227472616e736665722f6368616e6e656c2d31352f36222c22616d6f756e74223a223439383030303030303030222c2273656e646572223a22307835383261643331663630396233633735643032363935386361333161643036343335386138366266386338303035383463373538613337343562386535643132222c227265636569766572223a22307835383261643331663630396233633735643032363935386361333161643036343335386138366266386338303035383463373538613337343562386535643132222c226d656d6f223a22227d3a0708e30f10e7837740c0d2bfe5fef791ae17128d0d28e870696c645f73746f726167653a64656661756c743a6962632f8091af0675c4d56f658a58d3c93dad8c33587bc844d239d07f5c08640b47d615131501800081808c4ec481d9239144949c0a4cc8f184d3278db24e318b318a8866bf44d7575151808759ff7fa9ef1542acf69057689b6871e6d55385ba22e8ca7f78fc29c487b7291d028000b4807a7dd4608241ecba34ec70c2558480f76270f8043058638e17ab5f62179890e6808424176abb28c79d72d0e49ee9fb089176fa677423758308ed582390440627d780ed28d116d27e8d6920af1c4b8ab1deff88a76fb4dba806ef383cb3060ee6f85880c16e9c4037f1832f4920035d1306e1adfcea2e913760efb32a432feba30c2fd8510480ff038033793fccc2c514fc9321070be7b8b2a488e93cdb4f2f8ed94e68669db3f2cc1c800f2b2b748b3197371cc4afaa26ec46b5495d5944fb0e6f88e836d4f79a59810780cf3f1ca265773fcecfbb1019f3000b66651037748b50eae5d0244c70bd47a08f80659e7126b70d8234da1eb26288c3e76aa3b3b1326ac005ca32f324d88ba6d012808eacf34385c804f5ead45b3e997cdaee0715e87e8f6e6b1785c460e50fa2208080b1a55857aedb48479f083d6b8a574e84d8b52fed4e8a3fb4f91f84ad327350e08000e0b30049eae4d9d2c2230366e24b0c760f985afdebef53896234ab6c77fd9574c008000c084f6b5480070014400c084f6b14400c084f6b14400c084f6b14400c084f6b14400c084f6b4d0880ffff804a455a876830b2dcd746ca8bbce98fe4a320443ebecebcf4e3c5927df815c47480fd75ae48b70641f7c0b602962efaa953e821a172808061a8d4db40fcd13f02288070157781a41de50b27838ecb775a6c3545ace61df663eb2ded9fb18c6a2333428077ee3d3c738c1ad5b0e92297b4ecc24e1b7fbe98964c6e4a5fe5a974268691c9805054a4c336e34ffe663575819ca180692f9194da816aaec25663e08b74bb38e7805456bbc09698cb2a3c8270b0aa6519f6576116678b571cba56ee17e65df41d19802a351e5a0c07d09dedc46b6c974fed3aec98f93b5b41e633411040e198ffd8f88053cdeff33558ded2c6df8afc6a5a7ddfcd783dd8b14741ddf4c2bfc07a0d4e8d80e217fd05a849d59c1c9e85a4d5fb3b9d9c3ac9a5cca95ad84c5cea9bfe9db8d580777537b820bfddf33cba21ed5bbc96e96ac0993b05df75e9ab4c420188436b9a80ac3dab6d4a65c27ff3cd7fa38544375f331728e47325524f772a48cf5b0ca52280ef0d2a156e5dc12f640e0008ce480afe6c0539c6a04acf99e6df4403509031be80da9df26c6b91834b640e656e60ab69075ca81b920bf2b10c64fb92253a2862e780fcba0cf11d543cd607849ab7d7009ed1bbc4986ac67a64a29824800b8452daf5803e7e88c669c92e864cebaa50c09b9c05c02a7d8a6613881d0f81afe7b774910b80855ff88b5823f6578c6f3d11256be8fbd97ff668fa957bff86123460f5246aca2501886962632fc000806050e3061d85c07eeb839854d2d5c678e54dd248ce5c464785f7870cbdd6d716809bc1ee7f009d25c2dc231e372a08b16a7a70d6c321eb1ae1903ad7e6b364260fd904990352f73657175656e6365732f3fe03803708bf27a7521aeebba0141a5493f33a739bf34ef422c3ceff8eb9414ac9df32801d620f0621e163c42ffc58f6b6021d611618b6f136c1839f4a4894da922e1c3f80332f0720cd7ee732db8421176bdf53ee3a19d181df79ca07214d672c2bf1fb468069ec6a953a4f4f4cca852b43916427dc235ece80bd25e48122251a12e6143bf680b1a55857aedb48479f083d6b8a574e84d8b52fed4e8a3fb4f91f84ad327350e080b1a55857aedb48479f083d6b8a574e84d8b52fed4e8a3fb4f91f84ad327350e0806bdc09562f3bd4c5fdbf613739d721545cfc84551ca043b480d280bee566fc138046b09cf83286b0c096581f923ab6f5de984143694e00efcededeef2a070e47f074c008000c084f6b5480800314400c084f6b14400c084f6b14400c084f6b0502bf132656365697074732f706f7274732f7472616e736665722f6368616e6e656c732f6368616e6e656c2d3a2008016fd8159055b71860b93842fdfdc8d4257ccb3e420893073b12b1f27fdb135f5804470f1ea89a07e59f1f925d689be83db0ab50920a76dbe9bd6bb10008451000944582f73657175656e6365732f310c084f6ba0c008000c084f6b80ad2051b621ee6b6e047a9bef453e25bb5b1fc4ff2c58b53f50bb879951b3a91498c263400000803b8daeda9a2f6ceca7c7d4ffc215ba79f59e0d444abe708542a48feed3eac78e1a0708e30f109afb7620012a30357763676d3362626f74484263536a70674e3675475633333858687844477542323242455478736267614d7771687a54").unwrap(),
	};
	let Ics26Envelope::Ics4PacketMsg(PacketMsg::ToPacket(msg)) =
		Ics26Envelope::<LocalClientTypes>::try_from(any).unwrap() else {panic!()};
	dbg!(&msg);
	let data = String::from_utf8(msg.packet.data).unwrap();
	println!("{}", &data);
	// let ack = String::from_utf8(ack.acknowledgement.into_bytes()).unwrap();
	// println!("{}", &ack);
}
